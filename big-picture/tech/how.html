<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Patient file</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="Big picture, server side and client side doc">
    <link rel="preload" href="/assets/css/0.styles.06f8e488.css" as="style"><link rel="preload" href="/assets/js/app.f8de352b.js" as="script"><link rel="preload" href="/assets/js/2.a375547c.js" as="script"><link rel="preload" href="/assets/js/5.794cfa30.js" as="script"><link rel="prefetch" href="/assets/js/10.b8a72aea.js"><link rel="prefetch" href="/assets/js/11.e1e7b15d.js"><link rel="prefetch" href="/assets/js/12.a9932087.js"><link rel="prefetch" href="/assets/js/13.b36337da.js"><link rel="prefetch" href="/assets/js/14.dc8ab0e0.js"><link rel="prefetch" href="/assets/js/15.19e6c60c.js"><link rel="prefetch" href="/assets/js/16.7c2336f5.js"><link rel="prefetch" href="/assets/js/17.aa23014e.js"><link rel="prefetch" href="/assets/js/18.1cfa84ef.js"><link rel="prefetch" href="/assets/js/19.e83b0f9a.js"><link rel="prefetch" href="/assets/js/20.d47153f0.js"><link rel="prefetch" href="/assets/js/21.9ee3e32b.js"><link rel="prefetch" href="/assets/js/22.f5567422.js"><link rel="prefetch" href="/assets/js/23.b2a578d0.js"><link rel="prefetch" href="/assets/js/24.c2afedaf.js"><link rel="prefetch" href="/assets/js/25.470f7031.js"><link rel="prefetch" href="/assets/js/26.10d04e43.js"><link rel="prefetch" href="/assets/js/27.bc866bfa.js"><link rel="prefetch" href="/assets/js/28.ed0787be.js"><link rel="prefetch" href="/assets/js/29.7e352406.js"><link rel="prefetch" href="/assets/js/3.c2a535d4.js"><link rel="prefetch" href="/assets/js/30.2d72d1c7.js"><link rel="prefetch" href="/assets/js/31.9b334b7f.js"><link rel="prefetch" href="/assets/js/32.262d2e9c.js"><link rel="prefetch" href="/assets/js/33.a060fd4b.js"><link rel="prefetch" href="/assets/js/34.e8366f00.js"><link rel="prefetch" href="/assets/js/35.80e1c4d2.js"><link rel="prefetch" href="/assets/js/36.3a08d54d.js"><link rel="prefetch" href="/assets/js/37.0f972e9a.js"><link rel="prefetch" href="/assets/js/38.e4b7ce6c.js"><link rel="prefetch" href="/assets/js/39.7ee21b59.js"><link rel="prefetch" href="/assets/js/4.24208f23.js"><link rel="prefetch" href="/assets/js/40.952e7c9a.js"><link rel="prefetch" href="/assets/js/41.897cbac3.js"><link rel="prefetch" href="/assets/js/42.89180a75.js"><link rel="prefetch" href="/assets/js/43.5a3baeb2.js"><link rel="prefetch" href="/assets/js/44.058fd359.js"><link rel="prefetch" href="/assets/js/45.1a885c5b.js"><link rel="prefetch" href="/assets/js/46.a21e69da.js"><link rel="prefetch" href="/assets/js/47.5052dfb7.js"><link rel="prefetch" href="/assets/js/48.8c6abb32.js"><link rel="prefetch" href="/assets/js/49.3ac4f77f.js"><link rel="prefetch" href="/assets/js/50.e56a6bba.js"><link rel="prefetch" href="/assets/js/51.437c3545.js"><link rel="prefetch" href="/assets/js/52.f9c5095b.js"><link rel="prefetch" href="/assets/js/53.c8964207.js"><link rel="prefetch" href="/assets/js/54.f24ca1e9.js"><link rel="prefetch" href="/assets/js/55.a4461c51.js"><link rel="prefetch" href="/assets/js/56.7f9ff22b.js"><link rel="prefetch" href="/assets/js/57.de08da24.js"><link rel="prefetch" href="/assets/js/58.cb63f765.js"><link rel="prefetch" href="/assets/js/59.8c3505f2.js"><link rel="prefetch" href="/assets/js/6.b93ad3f0.js"><link rel="prefetch" href="/assets/js/60.078e4412.js"><link rel="prefetch" href="/assets/js/61.09a752b8.js"><link rel="prefetch" href="/assets/js/62.d47b4ec9.js"><link rel="prefetch" href="/assets/js/63.23950f72.js"><link rel="prefetch" href="/assets/js/64.468a3f57.js"><link rel="prefetch" href="/assets/js/65.1e1344a7.js"><link rel="prefetch" href="/assets/js/66.ab2c7aa6.js"><link rel="prefetch" href="/assets/js/67.01db4c63.js"><link rel="prefetch" href="/assets/js/68.ea6caa8a.js"><link rel="prefetch" href="/assets/js/69.faa0acb4.js"><link rel="prefetch" href="/assets/js/7.e975ed69.js"><link rel="prefetch" href="/assets/js/70.41d1160f.js"><link rel="prefetch" href="/assets/js/71.2950a2a9.js"><link rel="prefetch" href="/assets/js/72.9b6386b8.js"><link rel="prefetch" href="/assets/js/73.32b81ec5.js"><link rel="prefetch" href="/assets/js/74.fb9e6ada.js"><link rel="prefetch" href="/assets/js/75.142a495e.js"><link rel="prefetch" href="/assets/js/76.8091b741.js"><link rel="prefetch" href="/assets/js/77.4214eb1f.js"><link rel="prefetch" href="/assets/js/78.f4be5c05.js"><link rel="prefetch" href="/assets/js/79.c9a52ce6.js"><link rel="prefetch" href="/assets/js/8.fbedc228.js"><link rel="prefetch" href="/assets/js/80.2cde76c0.js"><link rel="prefetch" href="/assets/js/81.3f01a8ed.js"><link rel="prefetch" href="/assets/js/82.156e07d8.js"><link rel="prefetch" href="/assets/js/9.c2584342.js">
    <link rel="stylesheet" href="/assets/css/0.styles.06f8e488.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Patient file</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://95.217.13.83/pf/abcd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/savantcare/ptfile" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://95.217.13.83/pf/abcd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/savantcare/ptfile" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active"><span>Home</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/big-picture/" class="sidebar-heading clickable router-link-active open"><span>Big picture</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ptclient/docs/ui/" class="sidebar-heading clickable"><span>UI</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/big-picture/tech/" class="sidebar-heading clickable router-link-active open"><span>Tech</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/big-picture/tech/why.html" class="sidebar-link">Why</a></li><li><a href="/big-picture/tech/what.html" class="sidebar-link">What</a></li><li><a href="/big-picture/tech/how.html" aria-current="page" class="active sidebar-link">How</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ptserver/" class="sidebar-heading clickable"><span>Server</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ptclient/" class="sidebar-heading clickable"><span>Client</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/GLOSSARY.html" class="sidebar-link">Glossary</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#q1-how-to-run-the-app-locally">Q1) How to run the app locally?</a><ul><li><a href="#how-to-run-mysql-server">How to run mysql server?</a></li></ul></li><li><a href="#q2-how-to-start-the-documentation-system">Q2) How to start the documentation system?</a><ul><li><a href="#app-level">App level</a></li><li><a href="#api-level">Api Level</a></li></ul></li><li><a href="#q3-how-to-run-same-component-inside-patient-file-component-and-also-individually">Q3) How to run same component inside patient file component and also individually?</a><ul><li><a href="#step-1">Step 1</a></li><li><a href="#step-2">Step 2</a></li><li><a href="#step-3">Step 3</a></li></ul></li><li><a href="#q4-how-to-get-started">Q4) How to get started?</a></li><li><a href="#q5-how-to-see-app-behavior-when-db-server-connection-is-lost">Q5) How to see app behavior when DB server connection is lost?</a></li><li><a href="#q6-how-to-see-app-behavior-when-db-server-takes-10-seconds-for-api-response">Q6) How to see app behavior when DB server takes 10 seconds for API response?</a><ul><li><a href="#scenario-1">Scenario 1:</a></li><li><a href="#scenario-2">Scenario 2:</a></li><li><a href="#scenario-3">Scenario 3:</a></li></ul></li><li><a href="#q7-how-to-test-the-pwa-app">Q7) How to test the PWA app?</a></li><li><a href="#q8-how-to-reduce-boilerplate-code">Q8) How to reduce boilerplate code?</a></li><li><a href="#q9-how-are-the-components-structured">Q9) How are the components structured?</a><ul><li><a href="#option1-a-library-implementation">Option1: A library implementation</a></li><li><a href="#option2-a-framework-implementation">Option2: A framework implementation</a></li></ul></li><li><a href="#q10-how-to-theme-app-while-each-component-maintains-its-own-scoped-local-context-style">Q10) How to theme app while each component maintains its own scoped local context style?</a></li><li><a href="#q11-how-is-the-state-of-patient-on-a-historical-date-generated">Q11) How is the state of patient on a historical date generated?</a><ul><li><a href="#architecture-1">Architecture 1</a></li><li><a href="#architecture-2">Architecture 2</a></li></ul></li><li><a href="#q12-how-to-deploy-to-heroku">Q12) How to deploy to Heroku?</a></li><li><a href="#q13-how-to-maintain-priority-of-recommendations-reminders-goals-etc">Q13) How to maintain priority of recommendations, reminders, goals etc?</a></li><li><a href="#q14-how-to-make-sql-code-browsable">Q14) How to make sql code browsable?</a></li><li><a href="#q15-how-to-mark-a-component-as-reviewed">Q15) How to mark a component as reviewed?</a></li><li><a href="#q16-what-is-the-ui-to-lock-an-appt">Q16) What is the UI to lock an appt?</a></li></ul></div><p></p> <h2 id="q1-how-to-run-the-app-locally"><a href="#q1-how-to-run-the-app-locally" class="header-anchor">#</a> Q1) How to run the app locally?</h2> <p>The method used by core developers is to run the vuejs and node server locally and the mysql DB on a public server.</p> <p>VueJS talks to Nodejs running on same computer. Nodejs talks to mysql running on public server.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="commands" role="tabpanel" class="tabs-component-panel" style="display:none;"><p>Step1: Start vue-client</p> <div class="language- extra-class"><pre class="language-text"><code>cd /gt/sc-prog-repos/
git clone https://github.com/savantcare/ptfile.git
cd ptclient
ptclient&gt; npm install
# starts vue server
vue-client&gt; yarn dev
# or
vue-client&gt; npm run dev
</code></pre></div><p>Step2: Start node-server</p> <div class="language- extra-class"><pre class="language-text"><code>cd /gt/sc-prog-repos/ptfile/ptserver
ptserver&gt; npm install
ptserver&gt; npm run start             # start node server
</code></pre></div></section> <section aria-hidden="true" id="action" role="tabpanel" class="tabs-component-panel" style="display:none;"><video width="560" height="240" controls="controls"><source src="/assets/media/run-vue-node-local-with-non-local-db.0d7b56fb.webm" type="video/mp4">
  Your browser does not support the video tag.
</video></section></div></div> <p>In 3 incognito tabs open:</p> <p>To access phpmyadmin -&gt; http://138.68.233.185:81/ stanford : jaidurgama</p> <p>Login as doctor -&gt; http://localhost:8080/login user1@gmail.com : 123</p> <p>Login as doctor admin assistant -&gt; http://localhost:8080/login user1@gmail.com : 123</p> <h3 id="how-to-run-mysql-server"><a href="#how-to-run-mysql-server" class="header-anchor">#</a> How to run mysql server?</h3> <p>Steps from VK deployment on DO in July 2020:</p> <p>Start mysqld</p> <div class="language- extra-class"><pre class="language-text"><code>mkdir /gt/sc-prog-repos
cd /gt/sc-prog-repos
git clone https://github.com/savantcare/ptfile.git
cd ptfile/deploy/docker
apt update
apt install -y docker-compose
ptfile/deploy/docker&gt; docker-compose -f maria-10.4-docker-compose.yml up -d
</code></pre></div><p>To access phpmyadmin:
http://[ip-address]:81/</p> <p>First time the root password is qwerty. PhpmyAdmin that is installed with the above docker-compose will give access from root password.</p> <p>The admin password is given in:
patientfile/node-server/config/development.json (But this file is never committed to the repo)</p> <p>To enter the docker container:</p> <div class="language- extra-class"><pre class="language-text"><code>root@server1:/gt/sc-prog-repos/ptfile/deploy/docker# docker exec -ti docker_mariadb_1 bash
root@c02b4fc1097e:/# cd /gt/sc-prog-repos/ptfile/db
root@08e0dceb186a:/gt/sc-prog-repos/ptfile/deploy/db# ./create-first-user.sh
</code></pre></div><p>Ref: https://hackernoon.com/mariadb-phpmyadmin-docker-running-local-database-ok9q36ji</p> <h2 id="q2-how-to-start-the-documentation-system"><a href="#q2-how-to-start-the-documentation-system" class="header-anchor">#</a> Q2) How to start the documentation system?</h2> <h3 id="app-level"><a href="#app-level" class="header-anchor">#</a> App level</h3> <h4 id="prod"><a href="#prod" class="header-anchor">#</a> Prod</h4> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="commands" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language- extra-class"><pre class="language-text"><code>ptfile&gt; npm run docs-build     // Generate prod files in .vuepress/dist
</code></pre></div><p>Then send .vuepress/dist to repo -&gt; <a href="https://github.com/savantcare/savantcare.github.io" target="_blank" rel="noopener noreferrer">https://github.com/savantcare/savantcare.github.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- extra-class"><pre class="language-text"><code>ptfile&gt; cd ..
vk-tech@vk-mini-layer2-3 ~/g/sc-prog-repos&gt; cd savantcare.github.io
savantcare.github.io&gt; mv ../ptfile/.vuepress/dist/* .
savantcare.github.io&gt;  git add .; git commit -m &quot;generated new doc&quot;; git push
</code></pre></div></section> <section aria-hidden="true" id="action" role="tabpanel" class="tabs-component-panel" style="display:none;"><video width="560" height="240" controls="controls"><source src="/assets/media/deploy-docs-to-server.312e51da.webm" type="video/mp4">
  Your browser does not support the video tag.
</video></section></div></div> <p>Then access:
<a href="https://savantcare.github.io/" target="_blank" rel="noopener noreferrer">https://savantcare.github.io/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="dev"><a href="#dev" class="header-anchor">#</a> Dev</h4> <p>To write the docs and see changes with hot reload:</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="command" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language- extra-class"><pre class="language-text"><code>docs&gt; npm run docs-in-dev-mode
</code></pre></div></section> <section aria-hidden="true" id="action" role="tabpanel" class="tabs-component-panel" style="display:none;"><p><img src="/assets/img/hot-reload-docs.0c28da11.gif" alt="movie"></p></section></div></div> <p>Then access: <a href="http://localhost:8080/" target="_blank" rel="noopener noreferrer">http://localhost:8080/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="api-level"><a href="#api-level" class="header-anchor">#</a> Api Level</h3> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="command" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language- extra-class"><pre class="language-text"><code>vue-client&gt; npm run styleguide
</code></pre></div></section> <section aria-hidden="true" id="action" role="tabpanel" class="tabs-component-panel" style="display:none;"><video width="560" height="240" controls="controls"><source src="/assets/media/vue-component-tech-doc.39dd3fc2.webm" type="video/mp4">
  Your browser does not support the video tag.
</video></section></div></div> <p>And then go to:</p> <p>http://localhost:6060</p> <h2 id="q3-how-to-run-same-component-inside-patient-file-component-and-also-individually"><a href="#q3-how-to-run-same-component-inside-patient-file-component-and-also-individually" class="header-anchor">#</a> Q3) How to run same component inside patient file component and also individually?</h2> <h3 id="step-1"><a href="#step-1" class="header-anchor">#</a> Step 1</h3> <p>A new componet called AddRecommendationTab is created inside:</p> <p>/Users/vk-tech/gt/sc-prog-repos/patientfile/vue-client/src/cts/composition-layer2/AddRecommendation.vue</p> <h3 id="step-2"><a href="#step-2" class="header-anchor">#</a> Step 2</h3> <p>Now there is a route defined in vue-client/src/router/index.js:
{
path: '/recommendation',
name: 'recommendation',
component: () =&gt; import('@/views/Recommendation.vue')
},</p> <p>Now when ever someone comes to http://ip-address/recommendation the router sends the user to /views/Recommendation.vue</p> <h3 id="step-3"><a href="#step-3" class="header-anchor">#</a> Step 3</h3> <p>Inside views/recommendation.vue the component created in step 1 is used. By the following codes:</p> <ol><li><p>Component is imported:
import AddRecommendationTab from &quot;@/cts/patient/AddRecommendation&quot;;</p></li> <li><p>Component is displayed:</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>     &lt;el-tab-pane&gt;
        &lt;span slot=&quot;label&quot; style=&quot;font-size:22px&quot;&gt;Add recommendation&lt;/span&gt;
        &lt;AddRecommendationTab /&gt;
      &lt;/el-tab-pane&gt;
</code></pre></div><p>The above structure is maintained because:</p> <p>Components are supposed to be kept in components folder.</p> <p>Views are supposed to use components but not define components.</p> <h2 id="q4-how-to-get-started"><a href="#q4-how-to-get-started" class="header-anchor">#</a> Q4) How to get started?</h2> <p>A new programmer should be able to write a new componet in 5 mins.</p> <p>Start visual studio code
make sure vetur VSCode extension is installed.</p> <h2 id="q5-how-to-see-app-behavior-when-db-server-connection-is-lost"><a href="#q5-how-to-see-app-behavior-when-db-server-connection-is-lost" class="header-anchor">#</a> Q5) How to see app behavior when DB server connection is lost?</h2> <p>The mysql server is run from docker (See node-server/README.md)</p> <p>Use the web app and then</p> <p>$ docker stop [container-name-of-mysqld]</p> <p>Now refresh the web app.</p> <p>The data will come from localstorage but you will toast message saying:</p> <p>&quot;Filed to get &quot;component name&quot; data&quot;</p> <p>This works using try catch examples</p> <ol><li>[For recommendations](file:///gt/sc-prog-repos/patientfile/vue-client/src/store/modules/recommendation.js#221)</li> <li>[For reminder](file:///gt/sc-prog-repos/patientfile/vue-client/src/store/modules/reminder.js#221)</li></ol> <p>To put the system back:
$ docker start [container-name-of-mysqld]</p> <h2 id="q6-how-to-see-app-behavior-when-db-server-takes-10-seconds-for-api-response"><a href="#q6-how-to-see-app-behavior-when-db-server-takes-10-seconds-for-api-response" class="header-anchor">#</a> Q6) How to see app behavior when DB server takes 10 seconds for API response?</h2> <h3 id="scenario-1"><a href="#scenario-1" class="header-anchor">#</a> Scenario 1:</h3> <p>Refresh the browser page. The UI wsill show data immediately from local storage using <a href="https://github.com/robinvdvleuten/vuex-persistedstate" target="_blank" rel="noopener noreferrer">vuex-persistance.<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>After 10 seconds when API returns a value UI will update.</p> <p>In this case we saved the doctor 10 seconds.</p> <h3 id="scenario-2"><a href="#scenario-2" class="header-anchor">#</a> Scenario 2:</h3> <p>On the UI discontinue a rex.</p> <p>Inside database.json it will not say Discontinue:true UI will continue to show it as discontinued.</p> <p>After 10 seconds database.json will show Discontinue:true.</p> <p>In this case the app was able to give doctor 10 second faster response.</p> <h3 id="scenario-3"><a href="#scenario-3" class="header-anchor">#</a> Scenario 3:</h3> <p>The web page shows the current list of recommendations</p> <p>Edit node-server/database.json and change the description of a recommendation.</p> <p>Reload the page</p> <p>The web page should show the edited recommendation.</p> <p>Status: Fail</p> <h2 id="q7-how-to-test-the-pwa-app"><a href="#q7-how-to-test-the-pwa-app" class="header-anchor">#</a> Q7) How to test the PWA app?</h2> <p>pwa app does not run from localhost. So the following steps needs to be followed:</p> <p>We can test PWA app by install the following chrome extension:
https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb</p> <h2 id="q8-how-to-reduce-boilerplate-code"><a href="#q8-how-to-reduce-boilerplate-code" class="header-anchor">#</a> Q8) How to reduce boilerplate code?</h2> <p>Have three types of components? TODO:</p> <ol><li><p>UI components: Reusable across the whole app. They communicate just by using props and events, not holding any application logic.</p></li> <li><p>Layout components: App will have only 1 of these. Like header and footer.</p></li> <li><p>Domain components:</p></li></ol> <p>Ref: https://vueschool.io/articles/vuejs-tutorials/structuring-vue-cts/</p> <h2 id="q9-how-are-the-components-structured"><a href="#q9-how-are-the-components-structured" class="header-anchor">#</a> Q9) How are the components structured?</h2> <h3 id="option1-a-library-implementation"><a href="#option1-a-library-implementation" class="header-anchor">#</a> Option1: A library implementation</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;RecommendationsCard&gt;

&lt;CardHeader Prop{Title=Recommendation}&gt;
&lt;/CardHeader&gt;

&lt;DataTable Prop{row1:(a,b),row2:(c,d)}&gt;
&lt;/DataTable&gt;

&lt;/RecommendationsCard&gt;
</code></pre></div><h3 id="option2-a-framework-implementation"><a href="#option2-a-framework-implementation" class="header-anchor">#</a> Option2: A framework implementation</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;GenericCard Prop{Title=Recommendation, row1:(a,b),row2:(c,d)} &gt;

&lt;/GenericCard&gt;
</code></pre></div><p>Why is Option 1 better:</p> <p>Theory: RecommendationsCard is using libraries and in option 2 RecommendationsCard is using a framework. Ref: https://www.programcreek.com/2011/09/what-is-the-difference-between-a-java-library-and-a-framework/</p> <p>Practical:</p> <ol><li>Under option 1 I can decide not to use the cardHeader sub component and write my own card header in some cases like &quot;Date of birth component&quot;</li></ol> <h2 id="q10-how-to-theme-app-while-each-component-maintains-its-own-scoped-local-context-style"><a href="#q10-how-to-theme-app-while-each-component-maintains-its-own-scoped-local-context-style" class="header-anchor">#</a> Q10) How to theme app while each component maintains its own scoped local context style?</h2> <p>https://vuedose.tips/tips/theming-using-custom-properties-in-vuejs-cts/</p> <p>https://medium.com/maestral-solutions/coloring-your-app-implementing-live-theming-with-vue-js-and-styled-components-29e428900394</p> <p>https://bootstrap-vue.org/docs/reference/theming</p> <h2 id="q11-how-is-the-state-of-patient-on-a-historical-date-generated"><a href="#q11-how-is-the-state-of-patient-on-a-historical-date-generated" class="header-anchor">#</a> Q11) How is the state of patient on a historical date generated?</h2> <h3 id="architecture-1"><a href="#architecture-1" class="header-anchor">#</a> Architecture 1</h3> <p>Suppose doctor wants the state of the paitent on 15th Jan 2020:</p> <p>The query is:
select * from recommendationsTable where patientID=1 and createdBy &lt; &quot;15th Jan 2020&quot; and ( discontinuedDate &gt; &quot;15th Jan 2020&quot; or discontinuedDate == NULL)
This returns JSON A</p> <p>Suppose doctor wants the state of the paitent on 10th Mar 2020:
The query is:
select * from recommendationsTable where patientID=1 and createdBy &lt; &quot;10th Mar 2020&quot; and ( discontinuedDate &gt; &quot;10th Mar 2020&quot; or discontinuedDate == NULL)
This returns JSON B</p> <p>Suppose the doctor wants to know the state of the patient on 9th March 2020:
This requires the same API as above.</p> <p>Dis-Advantages of architecture 1:</p> <ol><li>Too many sql queries. But the data center is big and there are read only copies of MYSQL running from RAM ready to serve these queries. It is better to offload the complexity to the hardware instead of software. Wisdom says it is better to have expensive hardware and simple software.</li></ol> <h3 id="architecture-2"><a href="#architecture-2" class="header-anchor">#</a> Architecture 2</h3> <p>The first query is:
select * from recommendationsTable where patientID=1;
This returns JSON C</p> <p>Now all queries about the state of recommendation are made on the client side.</p> <p>Advantages of architecture 2:</p> <ol><li>Less number of queries to server.</li></ol> <p>Dis-Advantages of architecture 2:</p> <ol><li>How to run sql query over a JSON on the browser client side. Use https://vuex-orm.org/ with https://github.com/vuex-orm/plugin-axios and https://github.com/vuex-orm/plugin-soft-delete (bring discontinued to industry standard by calling it soft delete)</li></ol> <h2 id="q12-how-to-deploy-to-heroku"><a href="#q12-how-to-deploy-to-heroku" class="header-anchor">#</a> Q12) How to deploy to Heroku?</h2> <div class="language- extra-class"><pre class="language-text"><code>cd vue-client
npm run build
git add .
git commit -m &quot;.....&quot;
git push to the Repository
</code></pre></div><p>Heroku updates the staging server automatically when the master branch is updated</p> <h2 id="q13-how-to-maintain-priority-of-recommendations-reminders-goals-etc"><a href="#q13-how-to-maintain-priority-of-recommendations-reminders-goals-etc" class="header-anchor">#</a> Q13) How to maintain priority of recommendations, reminders, goals etc?</h2> <p>If you use double floating point numbers to indicate priority you do not need to re-order:</p> <p>1.00 Task A</p> <p>2.00 Task B</p> <p>3.00 Task C</p> <p>4.00 Task D</p> <p>5.00 Task E</p> <p>If you want to place task E between A and B then:-</p> <p>E.priority = A.priority + ((B.priority - A.priority) / 2)</p> <p>So now you have:</p> <p>1.00 Task A</p> <p>1.50 Task E</p> <p>2.00 Task B</p> <p>3.00 Task C</p> <p>4.00 Task D</p> <p>If you wanted to insert D between E and B then simply set its priority to 1.75. Given the approximately 18 decimal digits in a floating point number (1.75 is really 1.7500000000000000) you should have a worst case of 53 consecutive inserts before:</p> <p>A.priority + ((B.priority - A.priority) / 2) = B.priority</p> <p>And before anyone complains about the overhead of using doubles vs. integers, its just a few hardware instructions, compared with the processing and I/O overhead of reordering the list in the database which would be several orders of magnitude greater.</p> <p>Ref: https://softwareengineering.stackexchange.com/questions/95431/priority-list-of-tasks-stored-in-a-database</p> <h2 id="q14-how-to-make-sql-code-browsable"><a href="#q14-how-to-make-sql-code-browsable" class="header-anchor">#</a> Q14) How to make sql code browsable?</h2> <p>Option 1: https://github.com/k1LoW/tbls#lint-a-database</p> <p>Option 2: Take the model file from sequalize and then browse that.</p> <h2 id="q15-how-to-mark-a-component-as-reviewed"><a href="#q15-how-to-mark-a-component-as-reviewed" class="header-anchor">#</a> Q15) How to mark a component as reviewed?</h2> <p>In each component header there is a button called &quot;R&quot; this button on mouse over shows the date when the component was last reviewed by the logged in user.</p> <p>On clicking on R the component datetime of review is updated.</p> <p>The table used for this is:</p> <p>DB_SC_Components_V20 -&gt; componentStateReviewedOn</p> <h2 id="q16-what-is-the-ui-to-lock-an-appt"><a href="#q16-what-is-the-ui-to-lock-an-appt" class="header-anchor">#</a> Q16) What is the UI to lock an appt?</h2> <p>The slider in header shows all the appt dates.</p> <p>The locked are in black color.</p> <p>The not locked but in future are in blue color.</p> <p>First not locked in past is in red color.</p> <p>On clicking the circle the appt can be locked. All the reviewed on dates have to be &gt; then the previos appt that is locked.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/big-picture/tech/what.html" class="prev">
        What
      </a></span> <span class="next"><a href="/ptserver/big-picture.html">
        Big picture
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f8de352b.js" defer></script><script src="/assets/js/2.a375547c.js" defer></script><script src="/assets/js/5.794cfa30.js" defer></script>
  </body>
</html>
