(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{277:function(t,s,a){"use strict";a.r(s);var e=a(6),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"jsonserver-jwt-auth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsonserver-jwt-auth"}},[t._v("#")]),t._v(" JSONServer + JWT Auth")]),t._v(" "),a("h2",{attrs:{id:"install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[t._v("#")]),t._v(" Install")]),t._v(" "),a("h3",{attrs:{id:"on-mac"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#on-mac"}},[t._v("#")]),t._v(" On Mac")]),t._v(" "),a("p",[t._v("Download and install "),a("a",{attrs:{href:"https://hub.docker.com/editions/community/docker-ce-desktop-mac",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker desktop for mac"),a("OutboundLink")],1),t._v(" dmg. This is needed for running mysql server")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n\n$ docker run -p "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"80:80"')]),t._v(" -p "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3306:3306"')]),t._v(" -v "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PWD")]),t._v("}")]),t._v("/app:/app mattrayner/lamp:latest-1804 \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Ref: https://github.com/mattrayner/docker-lamp#using-the-image")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Confirm mysql is running http://[ip-address]/phpmyadmin/ ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# login: admin ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# To get the mysql server password ")]),t._v("\n$ docker logs  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Look at top lines")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# edit node_server/config.php to enter admin password")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. Create 4 databases A. sc_user B. sc_setting C. sc_reminder D. sc_recommendation")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. Insert the data: run sql statement inside the following 2 files:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# user_roles.sql")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# users.sql")]),t._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run start\n")])])]),a("p",[t._v("Might need to run")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm audit fix\n")])])]),a("h2",{attrs:{id:"how-to-login-register"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-to-login-register"}},[t._v("#")]),t._v(" How to login/register?")]),t._v(" "),a("h3",{attrs:{id:"from-browser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#from-browser"}},[t._v("#")]),t._v(" From browser")]),t._v(" "),a("p",[t._v("http://localhost:port/login")]),t._v(" "),a("h3",{attrs:{id:"from-command-line"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#from-command-line"}},[t._v("#")]),t._v(" From command line")]),t._v(" "),a("p",[t._v("You can login/register by sending a POST request to")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("POST http://localhost:8000/auth/login\nPOST http://localhost:8000/auth/register\n")])])]),a("p",[t._v("with the following data")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  "email": "alexey@email.com",\n  "password":"123"\n}\n')])])]),a("p",[t._v("You should receive an access token with the following format")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n   "access_token": "<ACCESS_TOKEN>"\n}\n')])])]),a("p",[t._v("You should send this authorization with any request to the protected endpoints")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Authorization: Bearer <ACCESS_TOKEN>\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);